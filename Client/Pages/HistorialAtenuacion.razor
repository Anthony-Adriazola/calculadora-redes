@using CalculadoraRedes.Client.Services

@page "/historial"
@inject HistorialService HistorialService

<h3 style="color: var(--text-color);">Historial de c√°lculos</h3>

@if (!HistorialService.Historial.Any())
{
    <p style="color: var(--text-color);">No hay c√°lculos registrados.</p>
}
else
{
    <button style="background-color: var(--accent-color); color: var(--text-color); border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer;" @onclick="LimpiarHistorial">üóëÔ∏è Limpiar historial</button>

    <ul style="list-style: none; padding: 0;">
        @foreach (var item in HistorialService.Historial)
        {
            <li style="margin-bottom: 1rem; background-color: var(--secondary-color); padding: 1rem; border-radius: 8px;">
                <div style="color: var(--text-color);">Splitters: @($"{item.totalSplitters:F2} dB")</div>
                <div style="color: var(--text-color);">Fusiones: @($"{item.AtenuacionFusiones:F2} dB") (@($"{item.Fusiones} x 0.03"))</div>
                <div style="color: var(--text-color);">Acopladores: @($"{item.AtenuacionAcopladores:F2} dB") (@($"{item.Acopladores} x 0.5"))</div>
                <div style="color: var(--text-color);">Fibra √≥ptica: @($"{item.AtenuacionFibra:F2} dB") (@($"{item.LongitudCable}/1000 x 0.2 dB"))</div>
                <strong style="color: var(--text-color);">Atenuaci√≥n total:</strong> @($"{item.AtenuacionTotal:F2} dB") <br />
                <strong style="color: var(--text-color);">Potencia recibida:</strong> @($"{item.PotenciaRecibida:F2} dBm") <br />
            </li>
        }
    </ul>
}

@code {
    void LimpiarHistorial()
    {
        HistorialService.Limpiar();
        StateHasChanged();
    }
}
